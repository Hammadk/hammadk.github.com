

<!DOCTYPE html>
<html lang="en">
  <head>
    <link href="https://plus.google.com/106605118708953549941" rel="publisher" />
    <meta charset="utf-8">
    <title>MongoDB vs PostgreSQL for Ruby on Rails | Hammad.ca </title>
    
    <meta name="author" content="Hammad Khalid">

    <!-- Enable responsive viewport -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="/assets/js/html5shiv.js"></script>
      <script src="/assets/js/respond.min.js"></script>
    <![endif]-->

    <!-- styles -->
    <link href="/assets/css/bootstrap.min.css" rel="stylesheet">
    <link href="/assets/css/style.css" rel="stylesheet">
    <link href="/assets/css/syntax.css" rel="stylesheet">

    <!-- Le fav and touch icons -->
    <!-- Update these with your own images
         <link rel="shortcut icon" href="images/favicon.ico">
         <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
         <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
         <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
         -->

    <!-- atom & rss feed -->
    <link href="/atom.xml" type="application/atom+xml" rel="alternate" title="Sitewide ATOM Feed">
    <link href="/rss.xml" type="application/rss+xml" rel="alternate" title="Sitewide RSS Feed">

  </head>

  <body>
    <div id="wrap">

      <div class="navbar navbar-fixed-top">
        <div class="container">

          <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
              <!-- <span class="icon-bar"></span> -->
              <span class="glyphicon glyphicon-list"></span>
              Menu
            </button>
            <a class="navbar-brand" href="/">Hammad Khalid</a>
          </div>

          <div class="collapse navbar-collapse">
            <ul class="nav navbar-nav">
              
              
              


  
    
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/blog/index.html"><span class="glyphicon glyphicon-road"></span> Blog</a></li>
      	
      
    
  
    
      
      	
      	<li><a href="/experiments/index.html"><span class="glyphicon glyphicon-fire"></span> Experiments</a></li>
      	
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/projects/index.html"><span class="glyphicon glyphicon-leaf"></span> Projects</a></li>
      	
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  




            </ul>
          </div>
        </div>
      </div>

      <div class="container">
        <div class="content">
          

<div class="page-header">
  <h1>MongoDB vs PostgreSQL for Ruby on Rails </h1>
</div>

<div class="row post-full page-content">
  <div class="row">
    <div class="col-md-8 col-md-offset-2">
      <div class="content post-content">

        
<p>I compared MongoDB(NoSQL) and PostgreSQL(SQL) databases for developing a Ruby on Rails app.</p>
<!--more-->
<p>I wanted to better understand the process of developing and deploying a MongoDB Rails app. So I built two twitter clones based on <a href="http://www.michaelhartl.com/">Michael Hartl’s</a> Ruby on Rails book. The first clone used the PostgreSQL database. The second clone used the popular NoSQL database, MongoDB. I then deployed these two apps on to <a href="https://www.heroku.com/">Heroku</a>. Here is what I learned:</p>

<h3 id="tldr">TLDR</h3>

<ul>
<li>If you want to avoid hiccups with third party tools (i.e., gems), pick PostgreSQL</li>

<li>If you want to avoid hiccups deploying to most cloud providers, pick PostgreSQL</li>

<li>If you have experience with deploying and developing with NoSQL, stick with MongoDB.</li>

<li>If you need to store files or assets in the database, pick MongoDB.</li>

<li>If you don’t like migrating your database after every change in your schema, pick MongoDB.</li>
</ul>

<p><img src="/assets/images/mongodbvspostgresql_large_image.png" alt="MongoDB VS PostgerSQL" /></p>

<h3 id="structuring_data">Structuring Data</h3>

<p>This app, like Twitter, allows users to follow the recent tweets of other users by following them. In an SQL environment the optimal method of creating this using a relationship table which create a new entry every time a user follows another. If the user stops following the other, the entry from the relationship table is destroyed. The final implementation requires using the Join command on the User table with the relationships table.</p>

<p>One the other hand MongoDB implementation of this is relationship is much simpler. MongoDB allows developers to store un-structured data. This comparison is similar to that of a statically typed language and a dynamically typed language. The user doesn’t have to worry about specifying every little detail, and this allows for clean and precise code.</p>

<p>In the MongoDB version of twitter, we store the ‘follow’ and ‘following’ relationships in the User’s table itself. Since MongoDB can natively understand arrays, we just store the ID of the follower, or the followed user, in the array. To avoid the performance penalty MongoDB even allows us to index the values within the array, so that they can be efficiently queried.</p>

<p>Something else that I really like about MongoDB was that In typical SQL Rails app, whenever a developer updates the schema of the application, he has to run a migrate task to add or remove the changed columns. The use of MongoDB doesn’t require this so the developer doesn’t have to bring their development process to a complete stop.</p>

<h3 id="deployment_to_heroku">Deployment to Heroku</h3>

<p>Unfortunately for MongoDB, most cloud providers only provide SQL database alternatives by default – including Heroku and Amazon Elastic Beanstalk. Deploying the PostgreSQL was fairly straight forward – just a simple <em>git push</em>. Deploying the MongoDB alternative of the twitter clone was much tougher. For almost every platform numerous workarounds were required to get this app working. It seems like while NoSQL alternatives are available for developers, it’s almost always treated with a lower priority.</p>

<p>Overall, while the MongoDB alternative of the app was better for modeling data, it required additional effort and code for deployment and additional features. Cloud providers tend to give preferences to users developing with traditional database and provide additional tools. At this point, Ruby on Rails framework itself has much more gems available for SQL databases than NoSQL databases.</p>

<p>If you are interested in the MongoDB version of the app, you can check out that Github repository on <a href="https://github.com/Hammadk/RubyonRails-mongodb-twitter-clone">Github</a></p>


        <div class="post-info">
          
          <span class="glyphicon glyphicon-tags"></span>   Tags:
          
          


  
    
    	<a href="/tags.html#SQL-ref"><li class="label label-info">SQL <span>(1)</span></li></a>
    
    	<a href="/tags.html#Ruby On Rails-ref"><li class="label label-info">Ruby On Rails <span>(1)</span></li></a>
    
    	<a href="/tags.html#MongoDB-ref"><li class="label label-info">MongoDB <span>(1)</span></li></a>
    
    	<a href="/tags.html#git-ref"><li class="label label-info">git <span>(3)</span></li></a>
    
  



          
          <p>
            <div class="date">
              <span> <span class="glyphicon glyphicon-time"></span>   Last Updated: 25 August 2013</span>
            </div>
          </p>

          <ul class="pager">
            
            <li class="previous"><a href="/blog/2012/09/06/we_live_in_public" title="We live in public"><span class="glyphicon glyphicon-arrow-left"></span> Previous : We live in public</a></li>
            
            <!-- <li><a href="/archive.html">Archive</a></li> -->
            
            <li class="next"><a href="/experiments/2014/01/16/the-there-be-light" title="Let there be Flashlight, an Android app">Next: Let there be Flashlight, an Android app <span class="glyphicon glyphicon-arrow-right"></span></a></li>
            
          </ul>
        </div>
      </div>
    </div> <!-- Main content -->

    <!-- The side bar -->
    <div class="col-md-2">
      <div class="bs-sidebar hidden-print" role="complementary">
        <div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=116626224027";
  fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));</script>

<div class="socialite">
  <ul class="social-buttons">
    <li>
      <a class="socialite twitter-share" href="http://twitter.com/share" data-text="MongoDB vs PostgreSQL for Ruby on Rails" data-via="hammadk" data-count="horizontal" data-url="/experiments/2013/08/25/mongodb-vs-sql" rel="nofollow" target="_blank">Share on Twitter</a>
    </li>
    <li>
      <a class="socialite facebook-like" href="http://www.facebook.com/sharer.php?u=&amp;t=MongoDB vs PostgreSQL for Ruby on Rails" data-action="like" data-send="false" data-layout="button_count" data-width="450" data-show-faces="false" rel="nofollow" target="_blank">Share on Facebook</a>
    </li>
    <!-- <li> -->
    <!--   <a class="socialite googleplus-one" href="https://plusone.google.com/_/+1/confirm?hl=en&amp;url=" rel="nofollow" target="_blank" data-size="medium" data-url="">Share on Google+</a> -->
    <!-- </li> -->
  </ul>
</div>

      </div>
    </div>
  </div> <!-- First Row -->

</div>

        </div>
      </div>

    </div><!--wrap -->


    <footer id="footer">
      <div class="container">
        <ul>
	      <li>Contact: <a href="mailto:hi@hammad.ca">hi@hammad.ca</a></li>
          <li> <a class="socialite twitter-follow" href="http://twitter.com/hammadk" data-show-count="false" >
              Follow @Hammadk
          </a> </li>
	      <li> LinkedIn: <a href="http://www.linkedin.com/pub/hammad-khalid/10/28b/a1">
              <img src="/assets/images/linkedin16.png" alt="LinkedIn logo"/> </a>
          </li>
        </ul>
        <p><small><span class="glyphicon glyphicon-copyright-mark"></span> 2013 Hammad.ca</small></p>
      </div>
    </footer>

    
    <script src="/assets/js/jquery.js"></script>
    <script src="/assets/js/bootstrap.min.js"></script>
    <script src="/assets/js/socialite.js"></script>
    <script>$(Socialite.load);</script>

  </body>
</html>
